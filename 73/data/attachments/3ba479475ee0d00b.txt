# Instructions

- Following Playwright test failed.
- Explain why, be concise, respect Playwright best practices.
- Provide a snippet of code with the fix, if possible.

# Test info

- Name: Request signature >> Verify that checkbox widget settings options function correctly in request signature.
- Location: /home/runner/work/OpenSign-Tests/OpenSign-Tests/tests/MainAppPages/Request_Signature.spec.js:3087:1

# Error details

```
Error: locator.click: Test timeout of 120000ms exceeded.
Call log:
  - waiting for locator('//i[@class="fa-light fa-gear icon"]')

    at /home/runner/work/OpenSign-Tests/OpenSign-Tests/tests/MainAppPages/Request_Signature.spec.js:3148:61
```

# Page snapshot

```yaml
- banner:
  - button ""
  - img "logo"
  - text: TEAM
  - button ""
  - img "img"
  - button "Pravin Testing account"
  - button ""
- complementary:
  - img "Profile"
  - paragraph: Pravin Testing account
  - paragraph: OpenSign pvt ltd
  - navigation "OpenSign Sidebar Navigation":
    - menubar "OpenSign Sidebar Navigation":
      - menuitem "Dashboard"
      - menuitem "Sign yourself"
      - menuitem "Request signatures"
      - button " Templates"
      - menuitem "OpenSign™ Drive"
      - button " Documents"
      - menuitem "Contactbook"
      - button " Settings"
  - link "OpenSign's Github"
  - link "OpenSign's LinkedIn"
  - link "OpenSign's Twitter"
  - link "OpenSign's Discord"
- text: Pages
- button "+ Add pages"
- text: +      
- button [disabled]
- text: 1 of 3
- button
- button "Back"
- button "Next"
- text: signature
- checkbox "Option-1"
- text: Option-1
- checkbox "Option-2"
- text: Option-2 Recipients  Andy amaya andyamaya@nxglabs.in 
- separator
- button "+ Add recipients"
- text: Fields  signature   stamp   initials   name   job title   company   date   text   text input   cells   checkbox   dropdown   radio button   image   email 
- contentinfo:
  - complementary:
    - paragraph: "All rights reserved © 2025 OpenSign™ ( version: v2.26.0 )"
```

# Test source

```ts
  3048 |         await page.locator('//span[normalize-space()=\'radio button\']').hover();
  3049 |     await page.mouse.down();
  3050 |     await page.mouse.move(680, 450)
  3051 |     await page.mouse.up();
  3052 |     await page.locator("//button[normalize-space()='Save']").click(); 
  3053 |       await page.locator('//i[@class="fa-light fa-copy icon"]').dblclick();
  3054 |         // Verify that there are now two matching elements
  3055 |         const RadiobuttonElements = await page.locator('//div[@class="signYourselfBlock react-draggable"]//div[1]//label[text()="option-1"]/preceding-sibling::input[@type="radio"]').count();
  3056 |         expect(RadiobuttonElements).toBeGreaterThan(1);
  3057 |         await page.locator('//span[normalize-space()=\'dropdown\']').hover();
  3058 |         await page.mouse.down();
  3059 |         await page.mouse.move(750, 550)
  3060 |         await page.mouse.up();
  3061 |         await page.locator("//button[normalize-space()='Save']").click(); 
  3062 |           await page.locator('//i[@class="fa-light fa-copy icon"]').dblclick();
  3063 |             // Verify that there are now two matching elements
  3064 |             const dropdownElements = await page.locator('//div[@class="signYourselfBlock react-draggable"]//div[@class="select-none-cls flex justify-between items-center" and text()="dropdown"]').count();
  3065 |             expect(dropdownElements).toBeGreaterThan(1);
  3066 |     await page.locator('//span[normalize-space()=\'image\']').hover();
  3067 |     await page.mouse.down();
  3068 |     await page.mouse.move(600, 500)
  3069 |     await page.mouse.up();
  3070 |     await expect(page.locator("//div[@class='signYourselfBlock react-draggable']//div[text()='image']")).toBeVisible();
  3071 |       await page.locator('//i[@class="fa-light fa-copy icon"]').dblclick();
  3072 |       //verify the copied element to be visible
  3073 |         await expect(page.locator("//div[@class='signYourselfBlock react-draggable react-draggable-dragged']//div[text()='image']")).toBeVisible();
  3074 |   await page.locator('//span[normalize-space()=\'email\']').hover();
  3075 | await page.mouse.down();
  3076 | await page.mouse.move(600, 550)
  3077 | await page.mouse.up();
  3078 | await expect(page.locator("//div[@class='signYourselfBlock react-draggable']//span[text()='email']")).toBeVisible();
  3079 |   await page.locator('//i[@class="fa-light fa-copy icon"]').dblclick();
  3080 |    // Verify that there are now two matching elements
  3081 |    await expect(page.locator("//div[@class='signYourselfBlock react-draggable react-draggable-dragged']//span[text()='email']")).toBeVisible();
  3082 |     await page.getByRole('button', { name: 'Next' }).click();
  3083 |     //await expect(page.locator('#selectSignerModal')).toContainText('Are you sure you want to send out this document for signatures?');
  3084 |     await page.getByRole('button', { name: 'Send' }).click();
  3085 |
  3086 | });
  3087 | test('Verify that checkbox widget settings options function correctly in request signature.', async ({ page }) => {
  3088 |   const commonSteps = new CommonSteps(page);
  3089 |   // Step 1: Navigate to Base URL and log in
  3090 |   await commonSteps.navigateToBaseUrl();
  3091 |   await commonSteps.login();
  3092 | //const title = await page.title()
  3093 |   //Expects page to have a heading with the name of dashboard.
  3094 | //expect(title).toBe('Dashboard - OpenSign™');
  3095 | await page.getByRole('menuitem', { name: 'Request signatures' }).click();
  3096 |   await page.locator('input[name="Name"]').fill('Offer Letter for QA1144');
  3097 |   const fileChooserPromise = page.waitForEvent('filechooser');
  3098 | await page.locator('input[type="file"]').click();
  3099 | const fileChooser = await fileChooserPromise;
  3100 | await fileChooser.setFiles(path.join(__dirname, '../TestData/Samplepdfs/Sample_Test_doc_line.pdf'));
  3101 | await page.locator('div').filter({ hasText: /^Signers\*Select\.\.\.$/ }).locator('svg').click();
  3102 | await page.getByRole('option', { name: 'Andy amaya<andyamaya@nxglabs.' }).waitFor({ timeout: 90000 });
  3103 | await page.getByRole('option', { name: 'Andy amaya<andyamaya@nxglabs.' }).click();
  3104 | await page.locator('input[name="Name"]').click();
  3105 | await expect(page.getByRole('button', { name: 'Next' })).toBeEnabled({ timeout: 90000 }); // Wait up to 90s
  3106 | await page.getByRole('button', { name: 'Next' }).click();
  3107 | await page.waitForLoadState("networkidle");
  3108 | await page.waitForSelector('//div[@class=\'react-pdf__Document\']', { timeout: 90000 }); 
  3109 | await page.locator('//span[normalize-space()="signature"]').waitFor({ state: 'visible', timeout: 90000 });
  3110 | await expect(page.locator('//span[normalize-space()=\'signature\']')).toBeVisible();
  3111 | await page.locator('//span[normalize-space()=\'signature\']').hover();
  3112 | await page.mouse.down();
  3113 | await page.mouse.move(600, 300)
  3114 | await page.mouse.up();
  3115 | try {
  3116 |   const rowLocator = page.locator('//div[@class="select-none-cls overflow-hidden w-full h-full text-black flex flex-col justify-center items-center"]//div[@class="font-medium"and text()="signature"]');
  3117 |
  3118 |   for (let i = 0; i < 5; i++) { // Retry up to 5 times
  3119 |       if (await rowLocator.isVisible() && await rowLocator.isEnabled()) {
  3120 |       
  3121 |           console.log("signature widget dragged and dropped");
  3122 |           break; // Exit the loop if successfully clicked
  3123 |       } else {
  3124 |           console.log(`Attempt ${i + 1}: signature widget not visible on the document, performing actions...`);
  3125 |           await page.locator('//span[normalize-space()="signature"]').hover();
  3126 |           await page.mouse.down();
  3127 |           await page.mouse.move(800, 300);
  3128 |           await page.mouse.up();
  3129 |           
  3130 |           // Wait a bit before checking again
  3131 |           await page.waitForTimeout(1000);
  3132 |       }
  3133 |   
  3134 |       if (i === 5) {
  3135 |           console.log("signature widget did not become visible on the document after multiple attempts.");
  3136 |       }
  3137 |   }
  3138 | } catch (error) {
  3139 |   console.log("Element not found or not interactable, continuing execution.");
  3140 |  
  3141 | }
  3142 | await page.locator('//span[normalize-space()=\'checkbox\']').hover();
  3143 |     await page.mouse.down();
  3144 |     await page.mouse.move(600, 450)
  3145 |     await page.mouse.up();
  3146 |     await page.locator("//button[normalize-space()='Save']").click(); 
  3147 | while (true) {
> 3148 |   await page.locator('//i[@class="fa-light fa-gear icon"]').click();
       |                                                             ^ Error: locator.click: Test timeout of 120000ms exceeded.
  3149 |   
  3150 |   const isVisible = await page.locator('//h3[text()="Checkbox"]').isVisible();
  3151 |   
  3152 |   if (isVisible) {
  3153 |       console.log('"Copy widget to" is visible. Stopping the loop.');
  3154 |       break; // Exit loop once the element is visible
  3155 |   }
  3156 |
  3157 |   await page.waitForTimeout(500); // Small delay to prevent rapid clicking
  3158 | }
  3159 |  await expect(page.locator('form')).toContainText('Name *');
  3160 |   await expect(page.getByRole('textbox').first()).toHaveValue('checkbox');
  3161 |   await expect(page.locator('form')).toContainText('Options');
  3162 |   await expect(page.getByRole('textbox').nth(1)).toHaveValue('option-1');
  3163 |   await expect(page.getByRole('textbox').nth(2)).toHaveValue('option-2');
  3164 |   await page.locator('#selectSignerModal i').nth(2).click();
  3165 |   await page.getByRole('textbox').nth(3).click();
  3166 |   await page.getByRole('textbox').nth(3).fill('option-3');
  3167 |   await page.locator("(//select[contains(@class, 'op-select')])[1]").selectOption('18');
  3168 |   await page.locator("(//select[contains(@class, 'op-select')])[2]").selectOption('blue');
  3169 | //await page.locator('//dialog[@id="selectSignerModal"]//div[@class="flex items-center mt-3 mb-3"]').selectOption('18');
  3170 | //await page.locator('//dialog[@id="selectSignerModal"]//select[@class="ml-[33px] md:ml-4 w-[65%] md:w-[full] op-select op-select-bordered op-select-sm focus:outline-none hover:border-base-content text-xs"]').selectOption('blue');
  3171 |  await page.getByRole('button', { name: 'Save' }).click();
  3172 |  
  3173 |  const fontSize = await page.locator('(//div[@class="signYourselfBlock react-draggable react-draggable-dragged"]//div[1]//input[@type="checkbox"])[1]').evaluate(el => window.getComputedStyle(el).fontSize);
  3174 |  const color = await page.locator('(//div[@class="signYourselfBlock react-draggable react-draggable-dragged"]//div[1]//input[@type="checkbox"])[1]').evaluate(el => getComputedStyle(el).color);
  3175 |
  3176 | console.log(`Font Size: ${fontSize}, Color: ${color}`);
  3177 |
  3178 | if (fontSize === '16px' && color === 'rgb(33, 37, 41)') {
  3179 |   console.log('Test Passed: Font size and color are correct.');
  3180 | } else {
  3181 |   throw new Error(`Test Failed: Expected Font Size: 16px, Color: blue but got Font Size: ${fontSize}, Color: ${color}`);
  3182 | }
  3183 | //const checkboxes = await page.locator('//div[@class="signYourselfBlock react-draggable react-draggable-dragged"]//div[1]//input[@type="checkbox"]').allTextContents();
  3184 | //console.log(checkboxes);
  3185 | // Filter out empty values
  3186 | //const filteredCheckboxes = checkboxes.filter(text => text.trim() !== "");
  3187 | //console.log(filteredCheckboxes);
  3188 | // Compare the sorted arrays
  3189 | //expect(filteredCheckboxes.sort()).toEqual(["option-1", "option-2", "option-3"].sort());
  3190 | });
  3191 | test('Verify that text widgets Copy widget to all pages function correctly in request signature.', async ({ page }) => {
  3192 |   const commonSteps = new CommonSteps(page);
  3193 |   // Step 1: Navigate to Base URL and log in
  3194 |   await commonSteps.navigateToBaseUrl();
  3195 |   await commonSteps.login();
  3196 | //const title = await page.title()
  3197 |   //Expects page to have a heading with the name of dashboard.
  3198 | //expect(title).toBe('Dashboard - OpenSign™');
  3199 | await page.getByRole('menuitem', { name: 'Request signatures' }).click();
  3200 |   await page.locator('input[name="Name"]').fill('Offer Letter for QA1144');
  3201 |   const fileChooserPromise = page.waitForEvent('filechooser');
  3202 | await page.locator('input[type="file"]').click();
  3203 | const fileChooser = await fileChooserPromise;
  3204 | await fileChooser.setFiles(path.join(__dirname, '../TestData/Samplepdfs/Sample_Test_doc_line.pdf'));
  3205 | await page.locator('div').filter({ hasText: /^Signers\*Select\.\.\.$/ }).locator('svg').click();
  3206 | await page.getByRole('option', { name: 'Andy amaya<andyamaya@nxglabs.' }).waitFor({ timeout: 90000 });
  3207 | await page.getByRole('option', { name: 'Andy amaya<andyamaya@nxglabs.' }).click();
  3208 | await page.locator('input[name="Name"]').click();
  3209 | await expect(page.getByRole('button', { name: 'Next' })).toBeEnabled({ timeout: 90000 }); // Wait up to 90s
  3210 | await page.getByRole('button', { name: 'Next' }).click();
  3211 | await page.waitForLoadState("networkidle");
  3212 | await page.waitForSelector('//div[@class=\'react-pdf__Document\']', { timeout: 90000 }); 
  3213 | await page.locator('//span[normalize-space()="signature"]').waitFor({ state: 'visible', timeout: 90000 });
  3214 | await expect(page.locator('//span[normalize-space()=\'signature\']')).toBeVisible();
  3215 | await page.locator('//span[normalize-space()=\'signature\']').hover();
  3216 | await page.mouse.down();
  3217 | await page.mouse.move(600, 300)
  3218 | await page.mouse.up();
  3219 | try {
  3220 |   const rowLocator = page.locator('//div[@class="select-none-cls overflow-hidden w-full h-full text-black flex flex-col justify-center items-center"]//div[@class="font-medium"and text()="signature"]');
  3221 |
  3222 |   for (let i = 0; i < 5; i++) { // Retry up to 5 times
  3223 |       if (await rowLocator.isVisible() && await rowLocator.isEnabled()) {
  3224 |       
  3225 |           console.log("signature widget dragged and dropped");
  3226 |           break; // Exit the loop if successfully clicked
  3227 |       } else {
  3228 |           console.log(`Attempt ${i + 1}: signature widget not visible on the document, performing actions...`);
  3229 |           await page.locator('//span[normalize-space()="signature"]').hover();
  3230 |           await page.mouse.down();
  3231 |           await page.mouse.move(800, 300);
  3232 |           await page.mouse.up();
  3233 |           
  3234 |           // Wait a bit before checking again
  3235 |           await page.waitForTimeout(1000);
  3236 |       }
  3237 |   
  3238 |       if (i === 5) {
  3239 |           console.log("signature widget did not become visible on the document after multiple attempts.");
  3240 |       }
  3241 |   }
  3242 | } catch (error) {
  3243 |   console.log("Element not found or not interactable, continuing execution.");
  3244 |  
  3245 | }
  3246 | await page.locator('//span[@class="md:inline-block text-center text-[15px] ml-[5px] font-semibold pr-1 md:pr-0" and text()="text"]').hover();
  3247 | await page.mouse.down();
  3248 | await page.waitForTimeout(1000);
```