# Instructions

- Following Playwright test failed.
- Explain why, be concise, respect Playwright best practices.
- Provide a snippet of code with the fix, if possible.

# Test info

- Name: Request signature >> Verify that the rotate page functions correctly in request signature.
- Location: /home/runner/work/OpenSign-Tests/OpenSign-Tests/tests/MainAppPages/Request_Signature.spec.js:1445:1

# Error details

```
Error: Timed out 5000ms waiting for expect(locator).toMatchAriaSnapshot(expected)

Locator: locator('#renderList')
- Expected  - 2
+ Received  + 5

  - text: Pages
  - button "+ Add pages"
- - text: +     
+ - text: +      
  - button
  - text: 2 of 3
  - button
  - button "Back"
  - button "Next"
  - text: Recipients A Andy amaya andyamaya@nxglabs.in 
  - separator
  - button "+ Add recipients"
- - text: Fields  signature   stamp   initials   name   job title   company   date   text   text input   checkbox   dropdown   radio button   image   email 
+ - text: Fields  signature   stamp   initials   name   job title   company   date   text   text input   cells   checkbox   dropdown   radio button   image   email 
+ - contentinfo:
+   - complementary:
+     - paragraph: "All rights reserved © 2025 OpenSign™ ( version: v2.26.0 )"
Call log:
  - expect.toMatchAriaSnapshot with timeout 5000ms
  - waiting for locator('#renderList')
    2 × locator resolved to <div id="renderList" class="relative bg-base-200 flex flex-col justify-between w-full overflow-y-auto">…</div>
      - unexpected value "- text: Pages Loading page… Loading page… Loading page…
- button "+ Add pages"
- text: +      
- button
- text: 2 of 3
- button
- button "Back"
- button "Next"
- text: Loading document.. Recipients A Andy amaya andyamaya@nxglabs.in 
- separator
- button "+ Add recipients"
- text: Fields  signature   stamp   initials   name   job title   company   date   text   text input   cells   checkbox   dropdown   radio button   image   email 
- contentinfo:
  - complementary:
    - paragraph: "All rights reserved © 2025 OpenSign™ ( version: v2.26.0 )""
    - locator resolved to <div id="renderList" class="relative bg-base-200 flex flex-col justify-between w-full overflow-y-auto">…</div>
    - unexpected value "- text: Pages Loading page… Loading page… Loading page…
- button "+ Add pages"
- text: +      
- button
- text: 2 of 3
- button
- button "Back"
- button "Next"
- text: Loading page… Recipients A Andy amaya andyamaya@nxglabs.in 
- separator
- button "+ Add recipients"
- text: Fields  signature   stamp   initials   name   job title   company   date   text   text input   cells   checkbox   dropdown   radio button   image   email 
- contentinfo:
  - complementary:
    - paragraph: "All rights reserved © 2025 OpenSign™ ( version: v2.26.0 )""
    6 × locator resolved to <div id="renderList" class="relative bg-base-200 flex flex-col justify-between w-full overflow-y-auto">…</div>
      - unexpected value "- text: Pages
- button "+ Add pages"
- text: +      
- button
- text: 2 of 3
- button
- button "Back"
- button "Next"
- text: Recipients A Andy amaya andyamaya@nxglabs.in 
- separator
- button "+ Add recipients"
- text: Fields  signature   stamp   initials   name   job title   company   date   text   text input   cells   checkbox   dropdown   radio button   image   email 
- contentinfo:
  - complementary:
    - paragraph: "All rights reserved © 2025 OpenSign™ ( version: v2.26.0 )""

    at /home/runner/work/OpenSign-Tests/OpenSign-Tests/tests/MainAppPages/Request_Signature.spec.js:1498:45
```

# Page snapshot

```yaml
- banner:
  - text: "New feature: Protect your account with Two-Factor Authentication (2FA) and enjoy the future of login with Passkeys — no passwords needed. — Setup now."
  - img
  - text: 
  - button ""
  - img "logo"
  - text: TEAM
  - button ""
  - img "img"
  - button "Pravin Testing account"
  - button ""
- complementary:
  - img "Profile"
  - paragraph: Pravin Testing account
  - paragraph: OpenSign pvt ltd
  - navigation "OpenSign Sidebar Navigation":
    - menubar "OpenSign Sidebar Navigation":
      - menuitem "Dashboard"
      - menuitem "Sign yourself"
      - menuitem "Request signatures"
      - button " Templates"
      - menuitem "OpenSign™ Drive"
      - button " Documents"
      - menuitem "Contactbook"
      - button " Settings"
  - link "OpenSign's Github"
  - link "OpenSign's LinkedIn"
  - link "OpenSign's Twitter"
  - link "OpenSign's Discord"
- text: Pages
- button "+ Add pages"
- text: +      
- button
- text: 2 of 3
- button
- button "Back"
- button "Next"
- text: Recipients A Andy amaya andyamaya@nxglabs.in 
- separator
- button "+ Add recipients"
- text: Fields  signature   stamp   initials   name   job title   company   date   text   text input   cells   checkbox   dropdown   radio button   image   email 
- contentinfo:
  - complementary:
    - paragraph: "All rights reserved © 2025 OpenSign™ ( version: v2.26.0 )"
```

# Test source

```ts
  1398 | await page.mouse.down();
  1399 |
  1400 | await page.mouse.move(600, 450)
  1401 | await page.mouse.up();
  1402 | await page.getByRole('button', { name: 'Next' }).click();
  1403 |
  1404 | //await expect(page.locator('#selectSignerModal')).toContainText('Are you sure you want to send out this document for signatures?');
  1405 | await page.getByRole('button', { name: 'Send' }).click();
  1406 | });
  1407 | test('Verify that the delete page functions correctly in request signature.', async ({ page }) => {
  1408 |   const commonSteps = new CommonSteps(page);
  1409 |   // Step 1: Navigate to Base URL and log in
  1410 |   await commonSteps.navigateToBaseUrl();
  1411 |   await commonSteps.login();
  1412 | //const title = await page.title()
  1413 |   //Expects page to have a heading with the name of dashboard.
  1414 | //expect(title).toBe('Dashboard - OpenSign™');
  1415 |
  1416 | await page.getByRole('menuitem', { name: 'Request signatures' }).click();
  1417 |   await page.locator('input[name="Name"]').click();
  1418 |   await page.locator('input[name="Name"]').fill('Offer Letter for QA1144');
  1419 |   await page.locator('input[name="Note"]').click();
  1420 |   const fileChooserPromise = page.waitForEvent('filechooser');
  1421 | await page.locator('input[type="file"]').click();
  1422 | const fileChooser = await fileChooserPromise;
  1423 | await fileChooser.setFiles(path.join(__dirname, '../TestData/Samplepdfs/Sample_Test_doc_line.pdf'));
  1424 | await page.locator('div').filter({ hasText: /^Signers\*Select\.\.\.$/ }).locator('svg').click();
  1425 | await page.getByRole('option', { name: 'Andy amaya<andyamaya@nxglabs.' }).waitFor({ timeout: 90000 });
  1426 | await page.getByRole('option', { name: 'Andy amaya<andyamaya@nxglabs.' }).click();
  1427 | await page.locator('input[name="Name"]').click();
  1428 | await expect(page.getByRole('button', { name: 'Next' })).toBeEnabled({ timeout: 90000 }); // Wait up to 90s
  1429 | await page.getByRole('button', { name: 'Next' }).click();
  1430 | await page.waitForLoadState("networkidle");
  1431 | await page.waitForSelector('//div[@class=\'react-pdf__Document\']', { timeout: 90000 }); 
  1432 | await page.locator('//span[normalize-space()="signature"]').waitFor({ state: 'visible', timeout: 90000 });
  1433 | await expect(page.locator('//span[normalize-space()=\'signature\']')).toBeVisible();
  1434 | await page.waitForLoadState("networkidle");
  1435 | await expect(page.locator('#renderList')).toContainText('1 of 3');
  1436 |   await page.locator('#container div').first().click();
  1437 |   await page.getByTitle('Delete page').locator('i').click();
  1438 |   await expect(page.getByRole('heading')).toContainText('Delete page');
  1439 |   await expect(page.locator('#selectSignerModal')).toContainText('Are you sure you want to delete this page?');
  1440 |   await expect(page.locator('#selectSignerModal')).toContainText('Note: Once you delete this page, you cannot undo.');
  1441 |   await page.getByRole('button', { name: 'Yes' }).click();
  1442 |   await expect(page.locator('#renderList')).toContainText('1 of 2');
  1443 |
  1444 | });
  1445 | test('Verify that the rotate page functions correctly in request signature.', async ({ page }) => {
  1446 |   const commonSteps = new CommonSteps(page);
  1447 |   // Step 1: Navigate to Base URL and log in
  1448 |   await commonSteps.navigateToBaseUrl();
  1449 |   await commonSteps.login();
  1450 | //const title = await page.title()
  1451 |   //Expects page to have a heading with the name of dashboard.
  1452 | //expect(title).toBe('Dashboard - OpenSign™');
  1453 |
  1454 | await page.getByRole('menuitem', { name: 'Request signatures' }).click();
  1455 |   await page.locator('input[name="Name"]').click();
  1456 |   await page.locator('input[name="Name"]').fill('Offer Letter for QA1144');
  1457 |   await page.locator('input[name="Note"]').click();
  1458 |   const fileChooserPromise = page.waitForEvent('filechooser');
  1459 | await page.locator('input[type="file"]').click();
  1460 | const fileChooser = await fileChooserPromise;
  1461 | await fileChooser.setFiles(path.join(__dirname, '../TestData/Samplepdfs/Sample_Test_doc_line.pdf'));
  1462 | await page.locator('div').filter({ hasText: /^Signers\*Select\.\.\.$/ }).locator('svg').click();
  1463 | await page.getByRole('option', { name: 'Andy amaya<andyamaya@nxglabs.' }).waitFor({ timeout: 90000 });
  1464 | await page.getByRole('option', { name: 'Andy amaya<andyamaya@nxglabs.' }).click();
  1465 | await page.locator('input[name="Name"]').click();
  1466 | await expect(page.getByRole('button', { name: 'Next' })).toBeEnabled({ timeout: 90000 }); // Wait up to 90s
  1467 | await page.getByRole('button', { name: 'Next' }).click();
  1468 | await page.waitForLoadState("networkidle");
  1469 | await page.waitForSelector('//div[@class=\'react-pdf__Document\']', { timeout: 90000 }); 
  1470 | await page.locator('//span[normalize-space()="signature"]').waitFor({ state: 'visible', timeout: 90000 });
  1471 | await expect(page.locator('//span[normalize-space()=\'signature\']')).toBeVisible();
  1472 | await page.waitForLoadState("networkidle");
  1473 | await expect(page.locator('#renderList')).toContainText('1 of 3');
  1474 |   await page.locator('canvas').nth(1).click({
  1475 |     position: {
  1476 |       x: 80,
  1477 |       y: 133
  1478 |     }
  1479 |   });
  1480 |   await expect(page.locator('#renderList')).toContainText('2 of 3');
  1481 |   await page.getByTitle('Rotate right').locator('i').click();
  1482 |   await page.getByTitle('Rotate right').locator('i').click();
  1483 |  /* await expect(page.locator('#renderList')).toMatchAriaSnapshot(`
  1484 |     - text: Pages
  1485 |     - button "+ Add pages"
  1486 |     - text: +     
  1487 |     - button
  1488 |     - text: 2 of 3
  1489 |     - button
  1490 |     - button "Back"
  1491 |     - button "Next"
  1492 |     - text: Recipients A Andy amaya andyamaya@nxglabs.in 
  1493 |     - separator
  1494 |     - button "+ Add recipients"
  1495 |     - text: Fields  signature   stamp   initials   name   job title   company   date   text   text input   checkbox   dropdown   radio button   image   email 
  1496 |     `);*/
  1497 |   await page.getByTitle('Rotate right').locator('i').click();
> 1498 |   await expect(page.locator('#renderList')).toMatchAriaSnapshot(`
       |                                             ^ Error: Timed out 5000ms waiting for expect(locator).toMatchAriaSnapshot(expected)
  1499 |     - text: Pages
  1500 |     - button "+ Add pages"
  1501 |     - text: +     
  1502 |     - button
  1503 |     - text: 2 of 3
  1504 |     - button
  1505 |     - button "Back"
  1506 |     - button "Next"
  1507 |     - text: Recipients A Andy amaya andyamaya@nxglabs.in 
  1508 |     - separator
  1509 |     - button "+ Add recipients"
  1510 |     - text: Fields  signature   stamp   initials   name   job title   company   date   text   text input   checkbox   dropdown   radio button   image   email 
  1511 |     `);
  1512 |   await page.locator('#renderList div').filter({ hasText: 'PagesAdd pages2 of' }).first().click();
  1513 |   await expect(page.locator('#renderList')).toMatchAriaSnapshot(`
  1514 |     - text: Pages
  1515 |     - button "+ Add pages"
  1516 |     - text: +     
  1517 |     - button
  1518 |     - text: 2 of 3
  1519 |     - button
  1520 |     - button "Back"
  1521 |     - button "Next"
  1522 |     - text: Recipients A Andy amaya andyamaya@nxglabs.in 
  1523 |     - separator
  1524 |     - button "+ Add recipients"
  1525 |     - text: Fields  signature   stamp   initials   name   job title   company   date   text   text input   checkbox   dropdown   radio button   image   email 
  1526 |     `); 
  1527 | await page.locator('//span[normalize-space()=\'signature\']').hover();
  1528 | await page.mouse.down();
  1529 | await page.mouse.move(600, 200)
  1530 | await page.mouse.up();
  1531 | try {
  1532 |   const rowLocator = page.locator('//div[@class="select-none-cls overflow-hidden w-full h-full text-black flex flex-col justify-center items-center"]//div[@class="font-medium"and text()="signature"]');
  1533 |
  1534 |   for (let i = 0; i < 5; i++) { // Retry up to 5 times
  1535 |       if (await rowLocator.isVisible() && await rowLocator.isEnabled()) {
  1536 |       
  1537 |           console.log("signature widget dragged and dropped");
  1538 |           break; // Exit the loop if successfully clicked
  1539 |       } else {
  1540 |           console.log(`Attempt ${i + 1}: signature widget not visible on the document, performing actions...`);
  1541 |   
  1542 |           await page.locator('//span[normalize-space()="signature"]').hover();
  1543 |           await page.mouse.down();
  1544 |           await page.mouse.move(600, 200);
  1545 |           await page.mouse.up();
  1546 |           
  1547 |           // Wait a bit before checking again
  1548 |           await page.waitForTimeout(1000);
  1549 |       }
  1550 |   
  1551 |       if (i === 5) {
  1552 |           console.log("signature widget did not become visible on the document after multiple attempts.");
  1553 |       }
  1554 |   }
  1555 | } catch (error) {
  1556 |   console.log("Element not found or not interactable, continuing execution.");
  1557 |  
  1558 | }
  1559 | await page.locator('//span[normalize-space()=\'stamp\']').hover();
  1560 | await page.mouse.down();
  1561 | await page.mouse.move(700, 200)
  1562 | await page.mouse.up();
  1563 | await page.locator('//span[normalize-space()=\'initials\']').hover();
  1564 | await page.mouse.down();
  1565 | await page.mouse.move(800, 200)
  1566 | await page.mouse.up();
  1567 | await page.locator('//span[normalize-space()=\'name\']').hover();
  1568 | await page.mouse.down();
  1569 |
  1570 | await page.mouse.move(600, 260)
  1571 | await page.mouse.up();
  1572 | await page.locator('//span[normalize-space()=\'job title\']').hover();
  1573 | await page.mouse.down();
  1574 |
  1575 | await page.mouse.move(700, 260)
  1576 | await page.mouse.up();
  1577 | await page.locator('//span[normalize-space()=\'company\']').hover();
  1578 | await page.mouse.down();
  1579 | await page.mouse.move(800, 260)
  1580 | await page.mouse.up();
  1581 |
  1582 | await page.locator('//span[normalize-space()=\'date\']').hover();
  1583 | await page.mouse.down();
  1584 | await page.mouse.move(600, 290)
  1585 | await page.mouse.up();
  1586 | await page.locator('//span[normalize-space()=\'text input\']').hover();
  1587 | await page.mouse.down();
  1588 | await page.mouse.move(700, 290)
  1589 | await page.mouse.up();
  1590 | await page.locator('//span[normalize-space()=\'checkbox\']').hover();
  1591 | await page.mouse.down();
  1592 | await page.mouse.move(800, 290)
  1593 | await page.mouse.up();
  1594 | page.locator("//button[@type='submit' and text()='Save']").click();
  1595 | await page.locator('//span[normalize-space()=\'image\']').hover();
  1596 | await page.mouse.down();
  1597 | await page.mouse.move(600, 350)
  1598 | await page.mouse.up();
```