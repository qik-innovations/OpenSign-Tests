# Instructions

- Following Playwright test failed.
- Explain why, be concise, respect Playwright best practices.
- Provide a snippet of code with the fix, if possible.

# Test info

- Name: Incompatiblepdfs >> Verify that the user can successfully sign a PDF that was previously incompatible pdf Order Form
- Location: /home/runner/work/OpenSign-Tests/OpenSign-Tests/tests/MainAppPages/pdfsCompatibility.spec.js:127:1

# Error details

```
TimeoutError: locator.waitFor: Timeout 90000ms exceeded.
Call log:
  - waiting for getByText('Successfully signed!') to be visible

    at /home/runner/work/OpenSign-Tests/OpenSign-Tests/tests/MainAppPages/pdfsCompatibility.spec.js:244:46
```

# Page snapshot

```yaml
- button ""
- img "logo"
- text: TEAM
- button ""
- img "img"
- button "Pravin Testing account"
- button ""
- complementary:
  - img "Profile"
  - paragraph: Pravin Testing account
  - paragraph: OpenSign pvt ltd
  - navigation "OpenSign Sidebar Navigation":
    - menubar "OpenSign Sidebar Navigation":
      - menuitem "Dashboard"
      - menuitem "Sign yourself"
      - menuitem "Request signatures"
      - button " Templates"
      - menuitem "OpenSign™ Drive"
      - button " Documents"
      - menuitem "Contactbook"
      - button " Settings"
  - link "OpenSign's Github"
  - link "OpenSign's LinkedIn"
  - link "OpenSign's Twitter"
  - link "OpenSign's Discord"
- text: Pages
- button "+ Add pages"
- text: +     
- dialog:
  - heading "Error" [level=3]
  - button "✕"
  - paragraph: Something went wrong, refreshing this page may solve this issue.
- button [disabled]
- text: 1 of 1
- button [disabled]
- button "Back"
- button "Finish"
- img "signature"
- img "stamp"
- img "initials"
- textbox "name": Pravin Testing account
- textbox "job title": Quality analystAA
- textbox "company": OpenSign pvt ltd
- text: 05/13/2025 
- checkbox "option-1"
- text: option-1
- checkbox "option-2"
- text: option-2
- img "image"
- text:   
- textbox "email": pravin+testaccount@nxglabs.in
- text: Fields  signature   stamp   initials   name   job title   company   date   text   checkbox   image   email 
- contentinfo:
  - complementary:
    - paragraph: "All rights reserved © 2025 OpenSign™ ( version: v2.20.1 )"
```

# Test source

```ts
  144 |   await fileChooser.setFiles(path.join(__dirname, '../TestData/Samplepdfs/IncompatiblePDFs/Order_Form.pdf'));
  145 |   await expect(page.getByRole('button', { name: 'Next' })).toBeEnabled({ timeout: 90000 }); // Wait up to 90s
  146 |   await page.getByRole('button', { name: 'Next' }).click();
  147 |   await page.waitForSelector('//div[@id=\'container\']//div[@class=\'react-pdf__Document\']', { timeout: 90000 }); 
  148 |   await page.waitForLoadState("networkidle");
  149 |   await page.locator('//span[normalize-space()="signature"]').waitFor({ state: 'visible', timeout: 90000 });
  150 | await page.locator('//span[normalize-space()="signature"]').hover();
  151 | await page.mouse.down();
  152 | await page.mouse.move(600, 300)
  153 | await page.mouse.up();
  154 |
  155 | try {
  156 |   const rowLocator = page.locator("//button[@type='button' and text()='Save']/parent::div");
  157 |
  158 |   for (let i = 0; i < 5; i++) { // Retry up to 5 times
  159 |       if (await rowLocator.isVisible() && await rowLocator.isEnabled()) {
  160 |           await rowLocator.click();
  161 |           console.log("Save button clicked!");
  162 |           break; // Exit the loop if successfully clicked
  163 |       } else {
  164 |           console.log(`Attempt ${i + 1}: Save button not visible, performing actions...`);
  165 |   
  166 |           await page.locator('//span[normalize-space()="signature"]').hover();
  167 |           await page.mouse.down();
  168 |           await page.mouse.move(800, 300);
  169 |           await page.mouse.up();
  170 |           
  171 |           // Wait a bit before checking again
  172 |           await page.waitForTimeout(1000);
  173 |       }
  174 |   
  175 |       if (i === 5) {
  176 |           console.log("Save button did not become visible after multiple attempts.");
  177 |       }
  178 |   }
  179 | } catch (error) {
  180 |   console.log("Element not found or not interactable, continuing execution.");
  181 |  
  182 | }
  183 |
  184 | await page.locator('//span[normalize-space()="stamp"]').hover();
  185 | await page.mouse.down();
  186 | await page.mouse.move(600, 360)
  187 | await page.mouse.up();
  188 | const fileChooserPromise1 = page.waitForEvent('filechooser');
  189 | await page.locator('//i[@class=\'fa-light fa-cloud-upload-alt uploadImgLogo\']').click();
  190 | const fileChooser1 = await fileChooserPromise1;
  191 | await fileChooser1.setFiles(path.join(__dirname, '../TestData/Images/stamp.jpg'));
  192 | await page.locator("//button[normalize-space()='Save']").click();
  193 | await page.locator('//span[normalize-space()="initials"]').hover();
  194 | await page.mouse.down();
  195 | await page.mouse.move(600, 420)
  196 | await page.mouse.up();
  197 | await page.locator("//button[@type='button' and text()='Save']/parent::div").click();
  198 | await page.locator('//span[normalize-space()="name"]').hover();
  199 | await page.mouse.down();
  200 | await page.mouse.move(600, 470)
  201 | await page.mouse.up();
  202 | await page.locator('//span[normalize-space()="job title"]').hover();
  203 | await page.mouse.down();
  204 | await page.mouse.move(600, 480)
  205 | await page.mouse.up();
  206 | await page.locator('//span[normalize-space()="company"]').hover();
  207 | await page.mouse.down();
  208 | await page.waitForTimeout(1000);
  209 | await page.mouse.move(600, 520)
  210 | await page.mouse.up();
  211 | await page.locator('//span[normalize-space()=\'date\']').hover();
  212 | await page.mouse.down();
  213 | await page.mouse.move(600, 550)
  214 | await page.mouse.up();
  215 | /*
  216 | await page.locator('//span[normalize-space()="text"]').hover();
  217 | await page.mouse.down();
  218 | await page.waitForTimeout(1000);
  219 | await page.mouse.move(600, 590)//textarea[@placeholder='text']
  220 | await page.mouse.up();
  221 | await page.locator('//textarea[@placeholder=\'text\']').fill('20 wood street sanfransisco');
  222 | */
  223 | await page.locator('//span[normalize-space()="checkbox"]').hover();
  224 | await page.mouse.down();
  225 | await page.mouse.move(600, 640)
  226 | await page.mouse.up();
  227 | page.locator("//button[@type='submit' and text()='Save']").click();
  228 | await page.locator('//span[normalize-space()=\'image\']').hover();
  229 | await page.mouse.down();
  230 | await page.mouse.move(600, 550)
  231 | await page.mouse.up();
  232 | const fileChooserPromise2 = page.waitForEvent('filechooser');
  233 | await page.locator('//i[@class=\'fa-light fa-cloud-upload-alt uploadImgLogo\']').click();
  234 | const fileChooser2 = await fileChooserPromise2;
  235 | await fileChooser2.setFiles(path.join(__dirname, '../TestData/Images/DesignerImage.png'));
  236 | const saveButton = page.locator("//button[normalize-space()='Save']");
  237 | await saveButton.waitFor();
  238 | await saveButton.click();
  239 | await page.locator('//span[normalize-space()="email"]').hover();
  240 | await page.mouse.down();
  241 | await page.mouse.move(600, 580)
  242 | await page.mouse.up();
  243 | await page.locator("//button[normalize-space()='Finish']").click();
> 244 | await page.getByText('Successfully signed!').waitFor({ timeout: 90000 });
      |                                              ^ TimeoutError: locator.waitFor: Timeout 90000ms exceeded.
  245 |   await page.locator("//input[@placeholder='Add an email address and hit enter']").fill('pravin@Nxglabs.in');
  246 |   await page.locator("//button[normalize-space()='Send']").click();
  247 |
  248 | });
  249 | test('Verify that the user can successfully sign a PDF that was previously incompatible pdf 10pages.', async ({ page }) => {
  250 |     const commonSteps = new CommonSteps(page);
  251 |     // Step 1: Navigate to Base URL and log in
  252 |     await commonSteps.navigateToBaseUrl();
  253 |     await commonSteps.login();
  254 |   //const title = await page.title()
  255 |     //Expects page to have a heading with the name of dashboard.
  256 |   //expect(title).toBe('Dashboard - OpenSign™');
  257 |   
  258 |   await page.getByRole('menuitem', { name: 'Sign yourself' }).click();
  259 |     await page.locator('input[name="Name"]').click();
  260 |     await page.locator('input[name="Name"]').fill('Offer Letter for QA1144');
  261 |     await page.locator('input[name="Name"]').press('Tab');
  262 |     await page.locator('input[name="Note"]').click();
  263 |     const fileChooserPromise = page.waitForEvent('filechooser');
  264 |   await page.locator('input[type="file"]').click();
  265 |   const fileChooser = await fileChooserPromise;
  266 |   await fileChooser.setFiles(path.join(__dirname, '../TestData/Samplepdfs/IncompatiblePDFs/10pages.pdf'));
  267 |   await expect(page.getByRole('button', { name: 'Next' })).toBeEnabled({ timeout: 90000 }); // Wait up to 90s
  268 |   await page.getByRole('button', { name: 'Next' }).click();
  269 |   await page.waitForSelector('//div[@id=\'container\']//div[@class=\'react-pdf__Document\']', { timeout: 90000 }); 
  270 |   await page.waitForLoadState("networkidle");
  271 |   await page.locator('//span[normalize-space()="signature"]').waitFor({ state: 'visible', timeout: 90000 });
  272 |   await page.waitForLoadState("networkidle");
  273 | await page.locator('//span[normalize-space()="signature"]').hover();
  274 | await page.mouse.down();
  275 | await page.mouse.move(600, 300)
  276 | await page.mouse.up();
  277 |
  278 | try {
  279 |   const rowLocator = page.locator("//button[@type='button' and text()='Save']/parent::div");
  280 |
  281 |   for (let i = 0; i < 5; i++) { // Retry up to 5 times
  282 |       if (await rowLocator.isVisible() && await rowLocator.isEnabled()) {
  283 |           await rowLocator.click();
  284 |           console.log("Save button clicked!");
  285 |           break; // Exit the loop if successfully clicked
  286 |       } else {
  287 |           console.log(`Attempt ${i + 1}: Save button not visible, performing actions...`);
  288 |   
  289 |           await page.locator('//span[normalize-space()="signature"]').hover();
  290 |           await page.mouse.down();
  291 |           await page.mouse.move(800, 300);
  292 |           await page.mouse.up();
  293 |           
  294 |           // Wait a bit before checking again
  295 |           await page.waitForTimeout(1000);
  296 |       }
  297 |   
  298 |       if (i === 5) {
  299 |           console.log("Save button did not become visible after multiple attempts.");
  300 |       }
  301 |   }
  302 | } catch (error) {
  303 |   console.log("Element not found or not interactable, continuing execution.");
  304 |  
  305 | }
  306 |
  307 | await page.locator('//span[normalize-space()="stamp"]').hover();
  308 | await page.mouse.down();
  309 | await page.mouse.move(600, 360)
  310 | await page.mouse.up();
  311 | const fileChooserPromise1 = page.waitForEvent('filechooser');
  312 | await page.locator('//i[@class=\'fa-light fa-cloud-upload-alt uploadImgLogo\']').click();
  313 | const fileChooser1 = await fileChooserPromise1;
  314 | await fileChooser1.setFiles(path.join(__dirname, '../TestData/Images/stamp.jpg'));
  315 | await page.locator("//button[normalize-space()='Save']").click();
  316 | await page.locator('//span[normalize-space()="initials"]').hover();
  317 | await page.mouse.down();
  318 | await page.mouse.move(600, 420)
  319 | await page.mouse.up();
  320 | await page.locator("//button[@type='button' and text()='Save']/parent::div").click();
  321 | await page.locator('//span[normalize-space()="name"]').hover();
  322 | await page.mouse.down();
  323 | await page.mouse.move(600, 470)
  324 | await page.mouse.up();
  325 | await page.locator('//span[normalize-space()="job title"]').hover();
  326 | await page.mouse.down();
  327 | await page.mouse.move(600, 480)
  328 | await page.mouse.up();
  329 | await page.locator('//span[normalize-space()="company"]').hover();
  330 | await page.mouse.down();
  331 | await page.mouse.move(600, 520)
  332 | await page.mouse.up();
  333 |
  334 | await page.locator('//span[normalize-space()="date"]').hover();
  335 | await page.mouse.down();
  336 | await page.mouse.move(600, 550)
  337 | await page.mouse.up();
  338 | /*
  339 | await page.locator('//span[normalize-space()="text"]').hover();
  340 | await page.mouse.down();
  341 | await page.waitForTimeout(1000);
  342 | await page.mouse.move(600, 590)//textarea[@placeholder='text']
  343 | await page.mouse.up();
  344 | await page.locator('//textarea[@placeholder=\'text\']').fill('20 wood street sanfransisco');
```